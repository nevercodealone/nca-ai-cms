---
import { Image } from 'astro:assets';

interface Props {
  articleId: string;
  alt: string;
}

const { articleId, alt } = Astro.props;

// Construct image URL from article folder
const imageSrc = `/api/article-image/${articleId}/hero.webp`;
---

<figure class="article-hero">
  <div class="article-hero-image">
    <Image
      src={imageSrc}
      alt={alt}
      width={1200}
      height={675}
      loading="eager"
    />
  </div>
  {alt && (
    <figcaption class="article-hero-caption">
      {alt}
    </figcaption>
  )}
</figure>

<style>
  .article-hero {
    margin: 0 calc(var(--gutter, 1rem) * -1) var(--space-12, 3rem);
  }

  .article-hero-image {
    overflow: hidden;
  }

  .article-hero-image img {
    width: 100%;
    max-height: 520px;
    object-fit: cover;
    display: block;
  }

  .article-hero-caption {
    max-width: var(--content-max, 720px);
    margin: var(--space-4, 1rem) auto 0;
    padding: 0 var(--gutter, 1rem);
    font-family: var(--font-body, serif);
    font-size: var(--text-sm, 0.875rem);
    font-style: italic;
    color: var(--color-text-muted, #706d68);
  }
</style>
